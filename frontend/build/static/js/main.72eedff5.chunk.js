(this["webpackJsonpbook-bank"]=this["webpackJsonpbook-bank"]||[]).push([[0],{157:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),i=n(68),c=n.n(i),o=n(9),r=n(6),l=(n(74),n(24),n(25),n(10)),h=n(11),j=n(13),u=n(12),b=n.p+"static/media/book.a8f23354.webp",d=n(0),p=function(e){Object(j.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(d.jsx)("header",{className:"App-header",children:Object(d.jsxs)("nav",{children:[Object(d.jsxs)(o.b,{class:"brand",to:"/",children:[Object(d.jsx)("img",{class:"logo",src:b,alt:"logo"}),Object(d.jsx)("span",{children:"Book Bank"})]}),Object(d.jsx)("input",{id:"bmenub",type:"checkbox",class:"show"}),Object(d.jsx)("label",{for:"bmenub",class:"burger pseudo button",children:"Menu"}),Object(d.jsxs)("div",{class:"menu",children:[Object(d.jsx)(o.b,{class:"button success",to:"/newlisting",children:"New Listing"}),Object(d.jsx)(o.b,{class:"button success",to:"/new-review",children:"New Review"}),Object(d.jsx)(o.b,{class:"button success",to:"/user-reviews",children:"See Reviews"}),Object(d.jsx)(o.b,{class:"pseudo button",to:"/login",children:"Login"}),Object(d.jsx)(o.b,{class:"button",to:"/register",children:"Register"})]})]})})}}]),n}(a.a.Component),O=n(19),x=n(14),g=n.p+"static/media/book.f7479a13.jpeg",m=n(4),v=function(e){Object(j.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).state={books:[],search_book:"",search_location:""},e.handleChange=e.handleChange.bind(Object(x.a)(e)),e}return Object(h.a)(n,[{key:"updateSearch",value:function(e){var t=this;console.log(JSON.stringify(e));var n=m.api.url+"/listings?book="+e;fetch(n).then((function(e){return e.json()})).then((function(e){console.log(e);var n="";n=0===Object.keys(e).length?"Uh oh. Looks like there aren't any books available for this search.":e.map((function(e){console.log(e.ListingID);var t="/listing/"+e.ListingID;return Object(d.jsx)("div",{children:Object(d.jsxs)("article",{class:"card",children:[Object(d.jsx)("img",{src:g,alt:e.name}),Object(d.jsxs)("footer",{children:[Object(d.jsx)("h3",{children:e.Book}),Object(d.jsx)("p",{children:"by: David Foster Wallace"}),Object(d.jsxs)("p",{children:["Location: ",e.Location]}),Object(d.jsxs)("p",{children:["Posted by: ",e.Username]}),Object(d.jsx)("div",{children:Object(d.jsx)(o.b,{class:"",to:t,children:Object(d.jsx)("button",{children:"View"})})}),Object(d.jsx)("div",{children:Object(d.jsx)(o.b,{class:"",to:t,children:Object(d.jsx)("button",{class:"error",children:"Remove"})})})]})]})},e.ListingID)})),t.setState({feed:n})}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.value,s=t.name;this.setState(Object(O.a)({},s,n)),this.updateSearch(e.target.value)}},{key:"componentDidMount",value:function(){var e=this,t=m.api.url+"/listings";fetch(t).then((function(e){return e.json()})).then((function(t){console.log(t);var n="";n=0===Object.keys(t).length?"Uh oh. Looks like there aren't any books available for this search.":t.map((function(e){console.log(e.ListingID);var t="/listing/"+e.ListingID;return Object(d.jsx)("div",{children:Object(d.jsxs)("article",{class:"card",children:[Object(d.jsx)("img",{src:g,alt:e.name}),Object(d.jsxs)("footer",{children:[Object(d.jsx)("h3",{children:e.Book}),Object(d.jsx)("p",{children:"by: David Foster Wallace"}),Object(d.jsxs)("p",{children:["Location: ",e.Location]}),Object(d.jsxs)("p",{children:["Posted by: ",e.Username]}),Object(d.jsx)("div",{children:Object(d.jsx)(o.b,{class:"",to:t,children:Object(d.jsx)("button",{children:"View"})})}),Object(d.jsx)("div",{children:Object(d.jsx)(o.b,{class:"",to:t,children:Object(d.jsx)("button",{class:"error",children:"Remove"})})})]})]})},e.ListingID)})),console.log("feed"+n),e.setState({feed:n})}))}},{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{class:"flex three-800 one",children:[Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"text",placeholder:"Book",value:this.state.search_book,name:"search_book",onChange:this.handleChange})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"text",placeholder:"Location",value:this.state.search_location,name:"search_location",onChange:this.handleChange})}),Object(d.jsx)("div",{class:"menu",children:Object(d.jsxs)("select",{children:[Object(d.jsx)("option",{children:"Novels"}),Object(d.jsx)("option",{children:"Textbooks"}),Object(d.jsx)("option",{children:"Magazines"}),Object(d.jsx)("option",{children:"Other"})]})})]}),Object(d.jsx)("div",{class:"results flex four-1100 three-800 two-500 one",children:this.state.feed})]})}}]),n}(a.a.Component);var f=function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(p,{}),Object(d.jsxs)("div",{class:"content",children:[Object(d.jsx)("h2",{children:"Welcome to Book Bank: The peer to peer library for physical books."}),Object(d.jsx)(v,{})]})]})},y=n(32),w=n(67),C={UserPoolId:m.cognito.UserPoolId,ClientId:m.cognito.ClientId},k=new w.CognitoUserPool(C),I=function(e){Object(j.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).state={username:"",password:""},s.handleInputChange=s.handleInputChange.bind(Object(x.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(x.a)(s)),s}return Object(h.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,s=t.name;this.setState(Object(O.a)({},s,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log("submit login");var t={Username:this.state.username,Password:this.state.password},n=new w.AuthenticationDetails(t),s={Username:this.state.username,Pool:k};new w.CognitoUser(s).authenticateUser(n,{onSuccess:function(e){var t=e.getAccessToken().getJwtToken();y.config.region="us-east-1",y.config.credentials=new y.CognitoIdentityCredentials({IdentityPoolId:m.cognito.IdentityPoolId,Logins:{"cognito-idp.us-east-1.amazonaws.com/us-east-1_6en0He0uy":e.getIdToken().getJwtToken()}}),y.config.credentials.refresh((function(e){e?console.error(e):console.log("Successfully logged! token: "+t)}))},onFailure:function(e){alert(e.message||JSON.stringify(e))}})}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(p,{}),Object(d.jsxs)("div",{class:"content",children:[Object(d.jsx)("h1",{children:"Login"}),Object(d.jsxs)("form",{class:"flex two-800 one",onSubmit:this.handleSubmit,children:[Object(d.jsx)("label",{children:Object(d.jsx)("input",{type:"text",value:this.state.username,name:"username",onChange:this.handleInputChange,placeholder:"Username"})}),Object(d.jsx)("label",{children:Object(d.jsx)("input",{type:"password",value:this.state.password,name:"password",onChange:this.handleInputChange,placeholder:"Password"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"submit",value:"Login"})})]})]})]})}}]),n}(a.a.Component),S=n(67),L={UserPoolId:m.cognito.UserPoolId,ClientId:m.cognito.ClientId},N=new S.CognitoUserPool(L),U=function(e){Object(j.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).state={email:"",username:"",location:"",password:""},s.handleInputChange=s.handleInputChange.bind(Object(x.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(x.a)(s)),s}return Object(h.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,s=t.name;this.setState(Object(O.a)({},s,n))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=[],n={Name:"email",Value:this.state.email},s={Name:"locale",Value:this.state.location},a=new S.CognitoUserAttribute(s),i=new S.CognitoUserAttribute(n);t.push(a),t.push(i);var c="/user/"+this.state.username;N.signUp(this.state.username,this.state.password,t,null,(function(e,t){if(e)alert(e.message||JSON.stringify(e));else{var n=t.user;console.log("user name is "+n.getUsername())}})),this.props.history.push(c)}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(p,{}),Object(d.jsxs)("div",{class:"content",children:[Object(d.jsx)("h1",{children:"Register"}),Object(d.jsxs)("form",{class:"flex two-800 one",onSubmit:this.handleSubmit,children:[Object(d.jsx)("label",{children:Object(d.jsx)("input",{type:"email",value:this.state.email,name:"email",onChange:this.handleInputChange,placeholder:"Email"})}),Object(d.jsx)("label",{children:Object(d.jsx)("input",{type:"password",value:this.state.password,name:"password",onChange:this.handleInputChange,placeholder:"Password"})}),Object(d.jsx)("label",{children:Object(d.jsx)("input",{type:"text",value:this.state.username,name:"username",onChange:this.handleInputChange,placeholder:"Username"})}),Object(d.jsx)("label",{children:Object(d.jsx)("input",{type:"text",value:this.state.location,name:"location",onChange:this.handleInputChange,placeholder:"Location"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"submit",value:"Submit"})})]})]})]})}}]),n}(a.a.Component),D=n(20),P=n.n(D),A=n(31),R=function(e){Object(j.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).state={username:"",location:"",book:"",duration:"",author:""},s.handleInputChange=s.handleInputChange.bind(Object(x.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(x.a)(s)),s}return Object(h.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,s=t.name;this.setState(Object(O.a)({},s,n))}},{key:"handleSubmit",value:function(e){var t=this;Object(A.a)(P.a.mark((function e(){var n,s,a,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.api.url+"/listings",e.next=3,fetch(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t.state)});case 3:return s=e.sent,e.next=6,s.json();case 6:200===(a=e.sent).statusCode&&(i="/listing/"+a.body.listingID,console.log("redirecting to new post: "+i),t.props.history.push(i));case 8:case"end":return e.stop()}}),e)})))(),e.preventDefault()}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(p,{}),Object(d.jsxs)("div",{class:"content",children:[Object(d.jsx)("h1",{children:"New Listing"}),Object(d.jsx)("h4",{children:"Item Information"}),Object(d.jsxs)("form",{class:"flex two-800 one",onSubmit:this.handleSubmit,children:[Object(d.jsx)("label",{children:Object(d.jsx)("input",{type:"text",value:this.state.book,name:"book",onChange:this.handleInputChange,placeholder:"Book Title"})}),Object(d.jsx)("label",{children:Object(d.jsx)("input",{type:"text",value:this.state.author,name:"author",onChange:this.handleInputChange,placeholder:"Author"})}),Object(d.jsx)("label",{children:Object(d.jsx)("input",{type:"text",value:this.state.location,name:"location",onChange:this.handleInputChange,placeholder:"Location"})}),Object(d.jsx)("label",{children:Object(d.jsx)("input",{type:"text",value:this.state.duration,name:"duration",onChange:this.handleInputChange,placeholder:"Duration"})}),Object(d.jsx)("label",{children:Object(d.jsx)("input",{type:"text",value:this.state.username,name:"username",onChange:this.handleInputChange,placeholder:"Username"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"submit",value:"Submit"})})]}),Object(d.jsx)("h4",{children:"Photo of book (highly reccomended)"}),Object(d.jsx)("div",{style:{width:200},children:Object(d.jsx)("label",{class:"dropimage",children:Object(d.jsx)("input",{title:"Drop image or click me",type:"file"})})})]})]})}}]),n}(a.a.Component),T=function(e){Object(j.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).state={listing:{},listing_id:""},s}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;console.log("setting state id: "+t),this.setState({listing_id:t}),console.log("state: "+this.state.listing_id);var n=m.api.url+"/listings?listingID="+t;fetch(n).then((function(e){return e.json()})).then((function(t){e.setState({listing:t[0]}),console.log(t)}))}},{key:"removeListing",value:function(e){var t=this;console.log("removing: "+e),Object(A.a)(P.a.mark((function e(){var n,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.api.url+"/listings",e.next=3,fetch(n,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({listingID:t.state.listing_id})});case 3:return s=e.sent,e.next=6,s.json();case 6:200===e.sent.statusCode&&(alert("Listing removed."),t.props.history.push("/"));case 8:case"end":return e.stop()}}),e)})))()}},{key:"requestListing",value:function(e){var t=this;console.log("requesting: "+e),Object(A.a)(P.a.mark((function e(){var n,s,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.api.url+"/requests",e.next=3,fetch(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:"johndoe",listing:t.state.listing_id})});case 3:return s=e.sent,e.next=6,s.json();case 6:a=e.sent,console.log(a),200===a.statusCode&&(alert("Request sent."),t.props.history.push("/"));case 9:case"end":return e.stop()}}),e)})))()}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(p,{}),Object(d.jsxs)("div",{class:"content",children:[Object(d.jsx)("img",{style:{width:500},src:g,alt:this.state.listing.Book}),Object(d.jsx)("h3",{children:this.state.listing.Book}),Object(d.jsxs)("p",{children:["Available for: ",this.state.listing.Duration]}),Object(d.jsxs)("p",{children:["Location: ",this.state.listing.Location]}),Object(d.jsxs)("p",{children:["Listing status: ",this.state.listing.Status]}),Object(d.jsx)("button",{class:"",onClick:this.requestListing.bind(this,this.state.listing_id),children:"Request to borrow this listing"}),Object(d.jsx)("br",{}),Object(d.jsx)("button",{class:"error",onClick:this.removeListing.bind(this,this.state.listing_id),children:"Delete this listing"})]})]})}}]),n}(a.a.Component),_=n(18);var J=function(){var e=Object(s.useState)(""),t=Object(_.a)(e,2),n=t[0],a=t[1],i=Object(s.useState)(""),c=Object(_.a)(i,2),o=c[0],l=c[1],h=Object(s.useState)(0),j=Object(_.a)(h,2),u=j[0],b=j[1],O=Object(s.useState)(""),x=Object(_.a)(O,2),g=x[0],v=x[1],f=Object(r.f)();return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(p,{}),Object(d.jsxs)("div",{className:"content",children:[Object(d.jsx)("h1",{children:"New User Review"}),Object(d.jsx)("h4",{children:"Review Information"}),Object(d.jsxs)("form",{className:"flex two-800 one",onSubmit:function(e){var t=m.api.url+"/user-review";fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({Username:n,Reviewer:o,Rating:u,Comment:g})}).then((function(e){e.json().then((function(e){200===e.statusCode&&f.push("/user-review/"+e.ReviewID)}))})).catch((function(e){return console.log(e)})),e.preventDefault()},children:[Object(d.jsx)("label",{children:Object(d.jsx)("input",{type:"text",value:n,name:"username",onChange:function(e){return a(e.target.value)},placeholder:"User being reviewed"})}),Object(d.jsx)("label",{children:Object(d.jsx)("input",{type:"text",value:o,name:"reviewer",onChange:function(e){return l(e.target.value)},placeholder:"Reviewer"})}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{children:"Rating (between 0 and 5):"}),Object(d.jsx)("input",{type:"range",value:u,name:"rating",min:"0",max:"5",step:"1",onChange:function(e){return b(Number(e.target.value))},placeholder:"Rating 1-5"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{children:"Comments"}),Object(d.jsx)("textarea",{value:g,name:"comment",onChange:function(e){return v(e.target.value)},placeholder:"Comments"})]}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"submit",value:"Submit"})})]}),Object(d.jsx)("h4",{children:"Photo backing up comment (OPTIONAL)"}),Object(d.jsx)("div",{style:{width:200},children:Object(d.jsx)("label",{className:"dropimage",children:Object(d.jsx)("input",{title:"Drop image or click me",type:"file"})})})]})]})};var B=function(e){var t=Object(s.useState)(""),n=Object(_.a)(t,2),a=n[0],i=n[1];return Object(s.useEffect)((function(){var t=e.match.params.id,n=m.api.url+"/user-review/"+t;fetch(n).then((function(e){e.json().then((function(e){console.log(e),i(e)})).catch((function(e){return console.log(e)}))}))}),[]),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(p,{}),Object(d.jsx)("div",{className:"content",children:Object(d.jsx)("p",{children:a})})]})},E=function(e){Object(j.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).state={user:{},username:""},s}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;console.log("setting state id: "+t),this.setState({username:t}),console.log("state: "+this.state.username);var n=m.api.url+"/users/"+t;fetch(n).then((function(e){return e.json()})).then((function(t){e.setState({user:t})}))}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(p,{}),Object(d.jsxs)("div",{class:"content",children:[Object(d.jsxs)("h3",{children:["User: ",this.state.user.username]}),Object(d.jsxs)("p",{children:["Location: ",this.state.user.location]}),Object(d.jsxs)("p",{children:["Rating: ",this.state.user.rating]}),Object(d.jsxs)("p",{children:["User class: ",this.state.user.type]})]})]})}}]),n}(a.a.Component);var q=function(e){var t=Object(s.useState)([]),n=Object(_.a)(t,2),a=n[0],i=n[1];return Object(s.useEffect)((function(){var e=m.api.url+"/user-review/";fetch(e).then((function(e){e.json().then((function(e){i(e.body)})).catch((function(e){return console.log(e)}))}))}),[]),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(p,{}),Object(d.jsx)("div",{className:"content",children:a.map((function(e){return Object(d.jsxs)("li",{children:[e.Username,", ",e.Reviewer,", ",e.Rating,","," ",e.Comment]})}))})]})};c.a.render(Object(d.jsx)(o.a,{children:Object(d.jsxs)(r.c,{children:[Object(d.jsx)(r.a,{exact:!0,path:"/",component:f}),Object(d.jsx)(r.a,{exact:!0,path:"/login",component:I}),Object(d.jsx)(r.a,{exact:!0,path:"/register",component:U}),Object(d.jsx)(r.a,{exact:!0,path:"/newlisting",component:R}),Object(d.jsx)(r.a,{exact:!0,path:"/listing/:id",component:T}),Object(d.jsx)(r.a,{exact:!0,path:"/user/:id",component:E}),Object(d.jsx)(r.a,{exact:!0,path:"/new-review",component:J}),Object(d.jsx)(r.a,{exact:!0,path:"/user-review/:id",component:B}),Object(d.jsx)(r.a,{exact:!0,path:"/user-reviews",component:q})]})}),document.getElementById("root"))},24:function(e,t,n){},25:function(e,t,n){},4:function(e){e.exports=JSON.parse('{"api":{"url":"https://50suyinvii.execute-api.us-east-1.amazonaws.com/dev"},"cognito":{"UserPoolId":"us-east-1_uZT8MH1w3","ClientId":"kisvul1gkuebec19vt2e6n5vt","IdentityPoolId":"us-east-1:9034639c-e1ad-474a-b9fe-05565a46c289"}}')},43:function(e,t){},74:function(e,t,n){}},[[157,1,2]]]);
//# sourceMappingURL=main.72eedff5.chunk.js.map